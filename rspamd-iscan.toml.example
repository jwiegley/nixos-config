# rspamd-iscan configuration for vulcan.lan
# See: https://github.com/fho/rspamd-iscan
#
# This tool monitors IMAP mailboxes and sends new emails to Rspamd for spam
# analysis and training. It's designed to work with the existing Dovecot and
# Rspamd setup on this server.
#
# Usage:
#   1. Copy this file: cp rspamd-iscan.toml.example rspamd-iscan.toml
#   2. Edit rspamd-iscan.toml with your password and preferences
#   3. Run: rspamd-iscan --cfg-file /etc/nixos/rspamd-iscan.toml
#
# IMPORTANT: Add your actual passwords before using!

# Rspamd HTTP API endpoint (default controller port)
RspamdURL = "http://localhost:11334"

# Rspamd controller password (required for spam training)
# Get this from: sudo cat /run/secrets/rspamd-controller-password
# Or set a new password in rspamd configuration
RspamdPassword = "YOUR_RSPAMD_PASSWORD_HERE"

# IMAP server connection
# Using localhost since rspamd-iscan runs on the same server as Dovecot
ImapAddr = "localhost:993"

# IMAP user to monitor (change to your username: johnw or assembly)
ImapUser = "johnw"

# IMAP password for the user account
ImapPassword = "YOUR_IMAP_PASSWORD_HERE"

# Mailbox to scan for incoming messages
# rspamd-iscan will monitor this folder for new emails
ScanMailbox = "INBOX"

# Mailbox where spam messages are filed
# Messages with spam score >= SpamThreshold will be moved here
SpamMailbox = "Spam"

# Mailbox for ham (non-spam) training
# Move false positives here to train Rspamd they are NOT spam
HamMailbox = "TrainGood"

# Mailbox for messages that weren't detected as spam
# This is useful for tracking missed spam
UndetectedMailbox = "TrainSpam"

# Mailbox where processed messages are moved to
# After processing, the original unmodified email is stored here
InboxMailbox = "INBOX"

# Backup mailbox for archiving original messages
# rspamd-iscan stores unmodified copies here before processing
BackupMailbox = "Backup"

# Spam threshold score (Rspamd default is typically 15.0)
# Messages scoring >= this value are considered spam
# Your current Dovecot setup uses 10.0 in the Sieve filter
SpamThreshold = 10.0

# Temporary directory for processing emails
TempDir = "/tmp"

# Keep temporary files after processing (useful for debugging)
# Set to false in production
KeepTempFiles = false
