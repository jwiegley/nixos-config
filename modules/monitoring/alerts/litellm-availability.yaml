groups:
  - name: litellm_availability
    interval: 60s
    rules:
      - alert: LiteLLMModelUnavailable
        expr: litellm_availability == 0
        for: 5m
        labels:
          severity: critical
          component: litellm
          model: athena/gpt-oss-20b
        annotations:
          summary: "LiteLLM model athena/gpt-oss-20b is unavailable"
          description: |
            LiteLLM model athena/gpt-oss-20b has been unavailable for {{ $value }} checks.
            This indicates the model is not responding to simple queries.

            Check LiteLLM service status: systemctl status litellm
            Check LiteLLM logs: journalctl -u litellm -f
            Check athena backend availability.

      - alert: LiteLLMSlowResponse
        expr: litellm_response_time_seconds > 30
        for: 10m
        labels:
          severity: warning
          component: litellm
          model: athena/gpt-oss-20b
        annotations:
          summary: "LiteLLM model athena/gpt-oss-20b is responding slowly"
          description: |
            LiteLLM model athena/gpt-oss-20b response time is {{ $value }}s (threshold: 30s).
            This may indicate backend performance issues.

      - alert: LiteLLMExporterDown
        expr: up{job="node"} == 1 unless litellm_availability
        for: 15m
        labels:
          severity: warning
          component: litellm-exporter
        annotations:
          summary: "LiteLLM Prometheus exporter is not producing metrics"
          description: |
            The LiteLLM availability exporter has not updated metrics in 15 minutes.

            Check exporter service: systemctl status litellm-exporter.service
            Check exporter timer: systemctl status litellm-exporter.timer
            View exporter logs: journalctl -u litellm-exporter -f
